;
; below parameters to be setted
;
eval $1$,20; total volume in mL to add
eval $2$,1; syringe number
eval $step$,20; number of additions to make
eval $pause$,1; pause in seconds between additions 
;
; above parameters to be setted
;
; procedure starts here
buffer
eval $pause$,$pause$*1000; transforms the value in milliseconds
getsyringeparms $2$
eval $valve1$,($2$-1)*2
eval $valve2$,$valve1$+1
eval $ml$,$syringemax$-$1$*($syringemax$/$syringevol$)
macro "valve_X_exit_2"$valve1$
send G1 $axisname$$ml$,0; take $ml$ milliliters
send M400,0; wait for task completion
macro "valve_X_exit_1"$valve1$
macro "valve_X_exit_2"$valve2$
for $cyc$ $step$
eval $vol$,($cyc$-1)*($1$/$step$); calculate the volume in the syringe for each addition
eval $ml$,$syringemax$-$vol$*($syringemax$/$syringevol$)
send G1 $axisname$$ml$,0; drop
send M400,0
send G4 P$pause$,0; wait (number in milliseconds)
next
macro "valve_X_close"$valve1$
macro "valve_X_close"$valve2$
print







